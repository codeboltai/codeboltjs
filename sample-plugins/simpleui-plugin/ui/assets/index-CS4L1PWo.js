import{c,m as V,n as T,o as n,j as e,A as p,p as f,B as l,f as S}from"./index-Ctn9h3MJ.js";import{r as o}from"./vendor-react-D9kjY9lP.js";import{a as r}from"./client-SPacxZjK.js";import{R as M}from"./refresh-cw-DnndEISm.js";import"./vendor-ui-D1rUgVI6.js";/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=c("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=c("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=c("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=c("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=c("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),K=a=>{var i,t,m,u;return{id:a.messageId,threadId:a.threadId,senderType:$(a.senderType||((i=a.sender)==null?void 0:i.senderType)),senderName:((t=a.sender)==null?void 0:t.senderType)==="agent"?"Agent":void 0,content:((m=a.data)==null?void 0:m.text)||((u=a.message)==null?void 0:u.userMessage)||"",timestamp:a.timestamp,templateType:a.templateType}},$=a=>a&&{user:"user",agent:"agent",system:"system",ai:"agent"}[a.toLowerCase()]||"system",H={async getMessages(a){try{return((await r.get(`/chat/messages/${a}`)).data||[]).map(K)}catch{return[]}},async getThreads(){return(await r.get("/chat/threads-info")).data},async createThread(a,i){return(await r.post("/chat/threads",{name:a,projectPath:i})).data},async setActiveThread(a){await r.post("/chat/set-active-thread",{threadId:a})},async deleteThread(a){await r.post("/chat/delete-thread",{threadId:a})},async sendMessage(a,i){return(await r.post("/chat/message",{threadId:a,message:{userMessage:i,templateType:"userChat"}})).data},async getThreadSteps(a){var t;return((t=(await r.get(`/chat/threads/${a}/steps`)).data)==null?void 0:t.data)||[]},async updateThreadName(a,i){await r.post("/chat/update-thread-name",{threadId:a,name:i})},async autoUpdateThreadName(a,i){await r.patch("/chat/threads/auto-update-name",{threadId:a,userMessage:i})}},_=()=>{const{messages:a,activeThreadId:i,isStreaming:t,agentStatus:m,currentTool:u,tokenUsage:x,addMessage:E,setActiveThread:D,setAgentStatus:w}=V(),{isConnected:N}=T(),[d,h]=o.useState(""),[g,k]=o.useState(!1),b=o.useRef(null),y=o.useRef(null);o.useEffect(()=>(n.connect(),n.on("message",s=>{console.log("Received message:",s)}),()=>{n.off("message",()=>{})}),[]),o.useEffect(()=>{var s;(s=b.current)==null||s.scrollIntoView({behavior:"smooth"})},[a]);const v=()=>{if(!d.trim()||!i)return;const s={id:Date.now().toString(),threadId:i,senderType:"user",content:d,timestamp:new Date().toISOString()};E(s),n.sendMessage(i,d),h(""),w("thinking")},A=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),v())},j=()=>{n.stopGeneration()},U=async()=>{try{const s=await H.createThread("New Chat");D(s.threadId)}catch(s){console.error("Failed to create thread:",s)}};o.useEffect(()=>{i||U()},[i]);const B=()=>{switch(m){case"thinking":return"Agent is thinking...";case"using_tool":return`Agent is using tool: ${u}`;case"error":return"Error occurred";default:return"Ready"}};return e.jsxDEV("div",{className:"flex h-full",children:[e.jsxDEV("div",{className:"flex-1 flex flex-col",children:[e.jsxDEV("div",{className:"h-14 border-b flex items-center justify-between px-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV(p,{className:"h-8 w-8",children:e.jsxDEV("div",{className:f("h-full w-full flex items-center justify-center text-sm font-medium","bg-primary text-primary-foreground"),children:"A"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:109,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:108,columnNumber:13},void 0),e.jsxDEV("span",{className:"font-medium",children:"Agent"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:116,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:107,columnNumber:11},void 0),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(l,{variant:"ghost",size:"icon",onClick:()=>n.connect(),children:e.jsxDEV(M,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:120,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:119,columnNumber:13},void 0),e.jsxDEV(l,{variant:"ghost",size:"icon",children:e.jsxDEV(I,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:123,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:122,columnNumber:13},void 0),e.jsxDEV(l,{variant:"ghost",size:"icon",onClick:()=>k(!g),children:e.jsxDEV(z,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:126,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:125,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:118,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:106,columnNumber:9},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin",children:[a.length===0&&e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[e.jsxDEV("p",{className:"text-lg mb-2",children:"Start a conversation"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:135,columnNumber:15},void 0),e.jsxDEV("p",{className:"text-sm",children:"Send a message to begin chatting with your agent"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:136,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:134,columnNumber:13},void 0),a.map(s=>{var C;return e.jsxDEV("div",{className:f("flex gap-3",s.senderType==="user"?"justify-end":"justify-start"),children:[s.senderType!=="user"&&e.jsxDEV(p,{className:"h-8 w-8 shrink-0",children:e.jsxDEV("div",{className:"h-full w-full bg-primary text-primary-foreground flex items-center justify-center text-sm",children:((C=s.senderName)==null?void 0:C.charAt(0))||"A"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:150,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:149,columnNumber:17},void 0),e.jsxDEV("div",{className:f("rounded-lg px-4 py-2 max-w-[70%]",s.senderType==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:[e.jsxDEV("p",{className:"text-sm whitespace-pre-wrap",children:s.content},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:163,columnNumber:17},void 0),e.jsxDEV("p",{className:"text-xs opacity-70 mt-1",children:S(s.timestamp)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:164,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:155,columnNumber:15},void 0),s.senderType==="user"&&e.jsxDEV(p,{className:"h-8 w-8 shrink-0",children:e.jsxDEV("div",{className:"h-full w-full bg-secondary flex items-center justify-center text-sm",children:"U"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:170,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:169,columnNumber:17},void 0)]},s.id,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:141,columnNumber:13},void 0)}),t&&e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV(p,{className:"h-8 w-8 shrink-0",children:e.jsxDEV("div",{className:"h-full w-full bg-primary text-primary-foreground flex items-center justify-center",children:e.jsxDEV(R,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:182,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:181,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:180,columnNumber:15},void 0),e.jsxDEV("div",{className:"bg-muted rounded-lg px-4 py-2",children:e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Thinking..."},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:186,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:185,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:179,columnNumber:13},void 0),e.jsxDEV("div",{ref:b},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:191,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:132,columnNumber:9},void 0),e.jsxDEV("div",{className:"border-t p-4",children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("textarea",{ref:y,value:d,onChange:s=>h(s.target.value),onKeyDown:A,placeholder:"Message (Enter to send, Shift+Enter for new line)",className:"flex-1 resize-none rounded-lg border bg-background px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary",rows:1,style:{minHeight:"44px",maxHeight:"150px"}},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:197,columnNumber:13},void 0),t?e.jsxDEV(l,{variant:"destructive",size:"icon",onClick:j,children:e.jsxDEV(q,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:209,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:208,columnNumber:15},void 0):e.jsxDEV(l,{onClick:v,disabled:!d.trim()||!N,children:e.jsxDEV(L,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:213,columnNumber:17},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:212,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:196,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:195,columnNumber:9},void 0),e.jsxDEV("div",{className:"h-8 border-t flex items-center justify-between px-4 text-xs text-muted-foreground",children:[e.jsxDEV("span",{children:B()},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:221,columnNumber:11},void 0),e.jsxDEV("span",{children:[x.used.toLocaleString()," tokens used"]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:222,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:220,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:104,columnNumber:7},void 0),g&&e.jsxDEV("div",{className:"w-80 border-l bg-muted/30",children:e.jsxDEV("div",{className:"p-4",children:[e.jsxDEV("h3",{className:"font-semibold mb-4",children:"Context"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:230,columnNumber:13},void 0),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Thread ID:"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:233,columnNumber:17},void 0),e.jsxDEV("p",{className:"font-mono text-xs truncate",children:i||"None"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:234,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:232,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Tokens:"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:237,columnNumber:17},void 0),e.jsxDEV("p",{children:[x.used.toLocaleString()," / ",x.total.toLocaleString()]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:238,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:236,columnNumber:15},void 0),e.jsxDEV("div",{className:"text-sm",children:[e.jsxDEV("span",{className:"text-muted-foreground",children:"Connection:"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:241,columnNumber:17},void 0),e.jsxDEV("p",{className:f(N?"text-green-500":"text-red-500"),children:N?"Connected":"Disconnected"},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:242,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:240,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:231,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:229,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:228,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ravirawat/Documents/codeboltai/AiEditor/CodeBolt/packages/simpleui/src/pages/Chat/index.tsx",lineNumber:102,columnNumber:5},void 0)};export{_ as default};
