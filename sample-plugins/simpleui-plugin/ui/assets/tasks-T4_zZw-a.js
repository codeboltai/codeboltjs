import{a as s}from"./client-SPacxZjK.js";const e=t=>({id:t.taskId,title:t.name,description:t.description,status:d(t.status),priority:t.priority||"medium",tags:t.tags||[],createdAt:t.createdAt,updatedAt:t.updatedAt,dueDate:t.dueDate,projectId:t.projectPath,needsApproval:!1,assignedAgent:t.assignedTo?{id:t.assignedTo,name:t.assignedTo,role:"",status:"idle",model:"",tasksCompleted:0,lastHeartbeat:new Date().toISOString(),uptime:"0h",capabilities:[]}:void 0}),d=t=>({pending:"inbox",todo:"inbox",assigned:"assigned",in_progress:"in_progress","in-progress":"in_progress",running:"in_progress",testing:"testing",review:"review",completed:"done",done:"done",failed:"archived",archived:"archived"})[t.toLowerCase()]||"inbox",o=t=>({inbox:"pending",assigned:"assigned",in_progress:"in_progress",testing:"testing",review:"review",done:"completed",archived:"archived"})[t],r={async getTasks(){var a;return((a=(await s.get("/tasks/project/current")).data.tasks)==null?void 0:a.map(e))||[]},async getTaskById(t){const a=await s.get(`/tasks/${t}`);return e(a.data)},async createTask(t){const a=await s.post("/tasks",{name:t.title,description:t.description,priority:t.priority||"medium",assignedTo:t.assignedTo,tags:t.tags,projectPath:t.projectId,dueDate:t.dueDate});return e(a.data)},async updateTask(t,a){const n=await s.put(`/tasks/${t}`,{name:a.title,description:a.description,status:a.status?o(a.status):void 0,priority:a.priority,assignedTo:a.assignedTo,tags:a.tags,dueDate:a.dueDate});return e(n.data)},async deleteTask(t){await s.delete(`/tasks/${t}`)},async searchTasks(t){var i;const a=new URLSearchParams;return t.query&&a.append("q",t.query),t.status&&a.append("status",o(t.status)),t.priority&&a.append("priority",t.priority),t.agentId&&a.append("agentId",t.agentId),((i=(await s.get(`/tasks/search?${a.toString()}`)).data.tasks)==null?void 0:i.map(e))||[]},async getStatistics(){return(await s.get("/tasks/statistics/overview")).data},async markInProgress(t){const a=await s.put(`/tasks/${t}/status/in-progress`);return e(a.data)},async markCompleted(t){const a=await s.put(`/tasks/${t}/status/completed`);return e(a.data)},async markFailed(t){const a=await s.put(`/tasks/${t}/status/failed`);return e(a.data)},async addChildTask(t,a){const n=await s.post(`/tasks/${t}/children`,{name:a.title,description:a.description});return e(n.data)},async getChildTasks(t){var n;return((n=(await s.get(`/tasks/${t}/children`)).data.children)==null?void 0:n.map(e))||[]}};export{r as t};
